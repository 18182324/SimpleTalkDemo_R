-- Use this script for Oracle Database version 12.2 and higher as it allows of object name length greater than 30
-- DROP TABLE DEMO_SENTIMENTANALYSIS_TEAMHEALTH;

-- Create a Table to store data
CREATE TABLE DEMO_SENTIMENTANALYSIS_TEAMHEALTH
(
    ID                     NUMBER GENERATED ALWAYS AS IDENTITY
   ,PERIOD                 VARCHAR2( 500 ) NOT NULL
   ,MANAGER                VARCHAR2( 500 ) NOT NULL
   ,TEAM                   VARCHAR2( 500 ) NOT NULL
   ,RESPONSE               VARCHAR2( 4000 ) NOT NULL -- this will store raw text of survey response
   ,KEY_PHRASES            VARCHAR2( 4000 ) -- this will store the comma separated list of key phrases generated by Azure API
   ,SENTIMENT_SCORE        NUMBER -- this will store the sentiment score generated by Azure API
   ,DW_CREATION_DATE       DATE DEFAULT SYSDATE
   ,DW_LAST_UPDATED_DATE   DATE
);

-- create a unique index
CREATE UNIQUE INDEX DEMO_SENTIANALYSIS_TEAMHEALTH_PK
    ON DEMO_SENTIMENTANALYSIS_TEAMHEALTH( ID )
    ONLINE;

-- create a primary key
ALTER TABLE DEMO_SENTIMENTANALYSIS_TEAMHEALTH
    ADD CONSTRAINT DEMO_SENTIANALYSIS_TEAMHEALTH_PK PRIMARY KEY
    (ID )
 USING INDEX DEMO_SENTIANALYSIS_TEAMHEALTH_PK ENABLE VALIDATE;
